<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Quiz à Réponses Multiples</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Style général */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      background: #fff;
      padding: 20px 30px;
      max-width: 600px;
      width: 90%;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
    }
    /* Page d'accueil */
    #home h1 {
      margin-bottom: 20px;
    }
    #start-btn {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    /* Zone du quiz */
    #quiz-container {
      display: none;
    }
    .question-counter {
      font-weight: bold;
      margin-bottom: 15px;
    }
    .question-text {
      font-size: 18px;
      margin-bottom: 15px;
    }
    .options {
      text-align: left;
      margin-bottom: 20px;
    }
    .option {
      margin-bottom: 8px;
    }
    .option input {
      margin-right: 8px;
    }
    #validate-btn {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    /* Zone de résultat de chaque question */
    #result {
      margin-top: 20px;
    }
    .result-image {
      display: block;
      margin: 0 auto;
      max-width: 150px;
    }
    .result-text {
      margin-top: 10px;
      font-size: 18px;
      font-weight: bold;
    }
    .correct-answer-text {
      color: green;
      margin-top: 8px;
    }
    .incorrect-answer-text {
      color: red;
      margin-top: 8px;
    }
    /* Page de résultats finale */
    #result-page {
      display: none;
    }
    #result-page h2 {
      margin-bottom: 20px;
    }
    #restart-btn {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <!-- Page d'accueil -->
  <div class="container" id="home">
    <h1>Bienvenue sur le Quiz !</h1>
    <button id="start-btn">Start</button>
  </div>

  <!-- Zone du quiz -->
  <div class="container" id="quiz-container">
    <div class="question-counter" id="question-counter">Question 1 sur 3</div>
    <div class="question-text" id="question-text">[Texte de la question]</div>
    <div class="options" id="options">
      <!-- Les options seront générées ici -->
    </div>
    <button id="validate-btn">Valider</button>
    <div id="result"></div>
  </div>

  <!-- Page de résultats finale -->
  <div class="container" id="result-page">
    <h2>Résultat du Quiz</h2>
    <p id="final-score">Votre score : 0 sur 3</p>
    <button id="restart-btn">Recommencer</button>
  </div>

  <script>
    // Données du quiz
    const quizData = [
      {
        question: "Quelle(s) couleur(s) sont présentes dans le drapeau français ?",
        options: ["Bleu", "Blanc", "Rouge", "Vert"],
        correctAnswers: ["Bleu", "Blanc", "Rouge"]
      },
      {
        question: "Quels jours composent le weekend ?",
        options: ["Samedi", "Dimanche", "Lundi", "Vendredi"],
        correctAnswers: ["Samedi", "Dimanche"]
      },
      {
        question: "Sélectionnez les fruits :",
        options: ["Pomme", "Carotte", "Banane", "Brocoli"],
        correctAnswers: ["Pomme", "Banane"]
      }
    ];

    let currentQuestion = 0; // Index de la question en cours
    let score = 0; // Nombre de réponses correctes

    // Références aux éléments HTML
    const homeDiv = document.getElementById("home");
    const quizContainer = document.getElementById("quiz-container");
    const startBtn = document.getElementById("start-btn");
    const questionCounter = document.getElementById("question-counter");
    const questionText = document.getElementById("question-text");
    const optionsDiv = document.getElementById("options");
    const validateBtn = document.getElementById("validate-btn");
    const resultDiv = document.getElementById("result");
    const resultPage = document.getElementById("result-page");
    const finalScoreText = document.getElementById("final-score");
    const restartBtn = document.getElementById("restart-btn");

    // Événements
    startBtn.addEventListener("click", startQuiz);
    validateBtn.addEventListener("click", validateAnswer);
    restartBtn.addEventListener("click", restartQuiz);

    // Démarrage du quiz
    function startQuiz() {
      homeDiv.style.display = "none";
      resultPage.style.display = "none";
      quizContainer.style.display = "block";
      currentQuestion = 0;
      score = 0;
      showQuestion();
    }

    // Affiche la question en cours et ses options
    function showQuestion() {
      resultDiv.innerHTML = "";
      // Le bouton Valider reste actif, quelle que soit la sélection
      validateBtn.disabled = false;
      const data = quizData[currentQuestion];
      questionCounter.textContent = "Question " + (currentQuestion + 1) + " sur " + quizData.length;
      questionText.textContent = data.question;
      optionsDiv.innerHTML = "";
      
      // Création des options avec checkbox
      data.options.forEach(option => {
        const div = document.createElement("div");
        div.className = "option";
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.value = option;
        checkbox.name = "option";
        const label = document.createElement("label");
        label.textContent = option;
        div.appendChild(checkbox);
        div.appendChild(label);
        optionsDiv.appendChild(div);
      });
    }

    // Vérifie la réponse de l'utilisateur
    function validateAnswer() {
      const data = quizData[currentQuestion];
      const selectedOptions = Array.from(document.querySelectorAll('input[name="option"]:checked'))
                                  .map(el => el.value);
      // Si aucune option n'est sélectionnée, afficher un popup et ne rien faire
      if (selectedOptions.length === 0) {
        alert("Veuillez sélectionner au moins une réponse");
        return;
      }
      
      // Comparaison des tableaux (ordre non important)
      const isCorrect = arraysEqual(selectedOptions.sort(), data.correctAnswers.sort());
      
      // Masquer le bouton de validation pour la question courante
      validateBtn.style.display = "none";

      if (isCorrect) {
        score++; // Incrémenter le score pour une réponse correcte
        // Afficher l'image "Correct"
        resultDiv.innerHTML = `<img src="https://via.placeholder.com/150/00FF00?text=Correct" alt="Correct" class="result-image">`;
      } else {
        // Afficher l'image "Incorrect" avec le texte "Réponse :" et la réponse exacte
        resultDiv.innerHTML = `
          <img src="https://via.placeholder.com/150/FF0000?text=Incorrect" alt="Incorrect" class="result-image">
          <div class="result-text">Réponse :</div>
          <div class="incorrect-answer-text">${data.correctAnswers.join(", ")}</div>
        `;
      }
      
      // Après un délai, passer à la question suivante ou afficher la page de résultats
      setTimeout(() => {
        currentQuestion++;
        if (currentQuestion < quizData.length) {
          // Réafficher le bouton Valider pour la prochaine question
          validateBtn.style.display = "inline-block";
          showQuestion();
        } else {
          showResultPage();
        }
      }, 2000);
    }

    // Affiche la page de résultats finale
    function showResultPage() {
      quizContainer.style.display = "none";
      finalScoreText.textContent = "Votre score : " + score + " sur " + quizData.length;
      resultPage.style.display = "block";
    }

    // Redémarre le quiz en revenant à la page d'accueil
    function restartQuiz() {
      resultPage.style.display = "none";
      homeDiv.style.display = "block";
    }

    // Fonction utilitaire pour comparer deux tableaux (ordre non important)
    function arraysEqual(arr1, arr2) {
      if (arr1.length !== arr2.length) return false;
      for (let i = 0; i < arr1.length; i++) {
        if (arr1[i] !== arr2[i]) return false;
      }
      return true;
    }
  </script>
</body>
</html>
